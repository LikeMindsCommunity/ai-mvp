// This is an example of the correct multi-file format for the code generator
// Each file block contains the COMPLETE contents of the file, not just the changes

<file path="pubspec.yaml">
name: my_app
description: A new Flutter project with LikeMinds SDK integration.
publish_to: 'none'
version: 1.0.0+1

environment:
  sdk: '>=3.0.0 <4.0.0'

dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.5
  likeminds_chat_flutter_core: ^1.0.0
  flutter_bloc: ^8.1.3
  shared_preferences: ^2.2.0

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^2.0.0

flutter:
  uses-material-design: true
  # assets:
  #   - images/a_dot_burr.jpeg
  #   - images/a_dot_ham.jpeg
</file>

<file path="lib/main.dart">
import 'package:flutter/material.dart';
import 'package:likeminds_chat_flutter_core/likeminds_chat_flutter_core.dart';
import 'package:my_app/screens/home_screen.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // Initialize LikeMinds Chat SDK
  await LMChatCore.instance.initialize();
  
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'LikeMinds Chat Demo',
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
        useMaterial3: true,
      ),
      home: const HomeScreen(),
    );
  }
}
</file>

<file path="lib/screens/home_screen.dart">
import 'package:flutter/material.dart';
import 'package:likeminds_chat_flutter_core/likeminds_chat_flutter_core.dart';

class HomeScreen extends StatelessWidget {
  const HomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('LikeMinds Chat'),
      ),
      body: Center(
        child: ElevatedButton(
          onPressed: () async {
            // Initialize user session
            final response = await LMChatCore.instance.showChatWithApiKey(
              apiKey: "your-api-key",
              uuid: "user-unique-id",
              userName: "User Name",
            );
            
            if (response.success && context.mounted) {
              // Navigate to chat home screen
              Navigator.of(context).push(
                MaterialPageRoute(
                  builder: (context) => const LMChatHomeScreen(),
                ),
              );
            } else {
              if (context.mounted) {
                ScaffoldMessenger.of(context).showSnackBar(
                  SnackBar(content: Text('Error: ${response.errorMessage}')),
                );
              }
            }
          },
          child: const Text('Open Chat'),
        ),
      ),
    );
  }
}
</file>

<file path="lib/widgets/custom_button.dart">
import 'package:flutter/material.dart';

class CustomButton extends StatelessWidget {
  final String text;
  final VoidCallback onPressed;
  final Color? color;

  const CustomButton({
    super.key,
    required this.text,
    required this.onPressed,
    this.color,
  });

  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: onPressed,
      style: ElevatedButton.styleFrom(
        backgroundColor: color ?? Theme.of(context).primaryColor,
        padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
      ),
      child: Text(
        text,
        style: const TextStyle(
          color: Colors.white,
          fontWeight: FontWeight.bold,
        ),
      ),
    );
  }
}
</file> 